### DDR3 UniPHY 

The files in this repo are generated by Quartus to implement a UniPHY memory controller in verilog for the [MSFT/Azure StoreyPeak boards](https://www.devops.lol/azure-fpga/).

The exact command used - using WSL2 on Ubuntu 18:
```
ip-generate altera_mem_if_ddr3_emif  --file-set=QUARTUS_SYNTH --output-name=ddram --component-system-param=DEVICE_FAMILY="Stratix V" --component-param=CALIBRATION_MODE="Quick" --component-param=TIMING_BOARD_DERATE_METHOD="AUTO" --component-param=MEM_TWTR="6" --component-param=STARVE_LIMIT="10" --component-param=SPEED_GRADE="2" --component-param=TIMING_TQSH="0.4" --component-param=OCT_SHARING_MODE="None" --component-param=MEM_TRFC_NS="260.0" --component-param=MEM_TRCD_NS="13.75" --component-param=TIMING_BOARD_SKEW_WITHIN_DQS="0.02" --component-param=C2P_WRITE_CLOCK_ADD_PHASE="0.0" --component-param=TIMING_TIS="140" --component-param=TIMING_BOARD_SKEW_CKDQS_DIMM_MIN="-0.01" --component-param=TIMING_BOARD_MAX_CK_DELAY="0.6" --component-param=DISCRETE_FLY_BY="true" --component-param=MEM_RTT_NOM="RZQ/4" --component-param=MEM_BANKADDR_WIDTH="3" --component-param=MEM_SRT="Normal" --component-param=TIMING_BOARD_SKEW_CKDQS_DIMM_MAX="0.01" --component-param=CTL_ECC_ENABLED="true" --component-param=AUTO_POWERDN_EN="false" --component-param=ENABLE_ABS_RAM_MEM_INIT="false" --component-param=TIMING_BOARD_DQ_TO_DQS_SKEW="0.0" --component-param=CFG_REORDER_DATA="false" --component-param=CTL_SELF_REFRESH_EN="false" --component-param=CORE_DEBUG_CONNECTION="EXPORT" --component-param=TIMING_TDS="40" --component-param=MEM_TRAS_NS="37.5" --component-param=REF_CLK_FREQ="125.0" --component-param=MEM_BT="Sequential" --component-param=FORCE_SHADOW_REGS="AUTO" --component-param=TIMING_TDH="110" --component-param=MEM_DQ_PER_DQS="8" --component-param=MEM_ROW_ADDR_WIDTH="16" --component-param=MEM_TREFI_US="7.8" --component-param=PINGPONGPHY_EN="false" --component-param=MEM_TCL="11" --component-param=TIMING_TDQSCK="225" --component-param=DLL_SHARING_MODE="None" --component-param=CTL_USR_REFRESH_EN="false" --component-param=TIMING_BOARD_MAX_DQS_DELAY="0.6" --component-param=TIMING_BOARD_SKEW_BETWEEN_DQS="0.02" --component-param=MEM_TWR_NS="15.0" --component-param=MEM_FORMAT="DISCRETE" --component-param=CTL_LOOK_AHEAD_DEPTH="4" --component-param=SOPC_COMPAT_RESET="false" --component-param=MEM_VENDOR="Hynix" --component-param=AVL_MAX_SIZE="64" --component-param=MEM_TMRD_CK="4" --component-param=MEM_TRRD_NS="6.25" --component-param=CTL_CSR_CONNECTION="INTERNAL_JTAG" --component-param=DEVICE_DEPTH="1" --component-param=MEM_VOLTAGE="1.35V DDR3L" --component-param=AUTO_PD_CYCLES="0" --component-param=CTL_CSR_ENABLED="true" --component-param=AC_PACKAGE_DESKEW="false" --component-param=MEM_IF_DM_PINS_EN="true" --component-param=USER_DEBUG_LEVEL="1" --component-param=PACKAGE_DESKEW="false" --component-param=PHY_ONLY="false" --component-param=MEM_COL_ADDR_WIDTH="10" --component-param=MEM_CK_PHASE="0.0" --component-param=TIMING_BOARD_AC_TO_CK_SKEW="0.0" --component-param=ADDR_ORDER="0" --component-param=MEM_CK_WIDTH="1" --component-param=MEM_ATCL="Disabled" --component-param=TIMING_TDQSS="0.25" --component-param=TIMING_TDQSQ="150" --component-param=BYTE_ENABLE="true" --component-param=MEM_VERBOSE="true" --component-param=MEM_ASR="Manual" --component-param=MEM_CLK_FREQ_MAX="1066.667" --component-param=SKIP_MEM_INIT="true" --component-param=MEM_WTCL="8" --component-param=RATE="Quarter" --component-param=MEM_TFAW_NS="30.0" --component-param=POWER_OF_TWO_BUS="true" --component-param=TIMING_TDSS="0.2" --component-param=TIMING_TIH="210" --component-param=PLL_LOCATION="Top_Bottom" --component-param=MEM_TRTP_NS="7.5" --component-param=PLL_SHARING_MODE="None" --component-param=MEM_RTT_WR="RZQ/2" --component-param=TIMING_TQH="0.38" --component-param=ENABLE_EXPORT_SEQ_DEBUG_BRIDGE="false" --component-param=MEM_DRV_STR="RZQ/6" --component-param=MEM_PD="DLL off" --component-param=TIMING_BOARD_AC_SKEW="0.02" --component-param=TIMING_TDSH="0.2" --component-param=CTL_AUTOPCH_EN="false" --component-param=EXPORT_AFI_HALF_CLK="false" --component-param=MEM_TRP_NS="13.75" --component-param=TIMING_BOARD_ISI_METHOD="AUTO" --component-param=ADD_EFFICIENCY_MONITOR="false" --component-param=MEM_CLK_FREQ="800.0" --component-param=MEM_MIRROR_ADDRESSING="0" --component-param=CTL_ECC_AUTO_CORRECTION_ENABLED="true" --component-param=MEM_TINIT_US="500" --component-param=MEM_DQ_WIDTH="72" 
# This is the no virtual JTAG version (to make sure we can use JTAG to SOC)
# ip-generate altera_mem_if_ddr3_emif  --file-set=QUARTUS_SYNTH --output-name=ddram --component-system-param=DEVICE_FAMILY="Stratix V" --component-param=CALIBRATION_MODE="Quick" --component-param=TIMING_BOARD_DERATE_METHOD="AUTO" --component-param=MEM_TWTR="6" --component-param=STARVE_LIMIT="10" --component-param=SPEED_GRADE="2" --component-param=TIMING_TQSH="0.4" --component-param=OCT_SHARING_MODE="None" --component-param=MEM_TRFC_NS="260.0" --component-param=MEM_TRCD_NS="13.75" --component-param=TIMING_BOARD_SKEW_WITHIN_DQS="0.02" --component-param=C2P_WRITE_CLOCK_ADD_PHASE="0.0" --component-param=TIMING_TIS="140" --component-param=TIMING_BOARD_SKEW_CKDQS_DIMM_MIN="-0.01" --component-param=TIMING_BOARD_MAX_CK_DELAY="0.6" --component-param=DISCRETE_FLY_BY="true" --component-param=MEM_RTT_NOM="RZQ/4" --component-param=MEM_BANKADDR_WIDTH="3" --component-param=MEM_SRT="Normal" --component-param=TIMING_BOARD_SKEW_CKDQS_DIMM_MAX="0.01" --component-param=CTL_ECC_ENABLED="true" --component-param=AUTO_POWERDN_EN="false" --component-param=ENABLE_ABS_RAM_MEM_INIT="false" --component-param=TIMING_BOARD_DQ_TO_DQS_SKEW="0.0" --component-param=CFG_REORDER_DATA="false" --component-param=CTL_SELF_REFRESH_EN="false" --component-param=CORE_DEBUG_CONNECTION="EXPORT" --component-param=TIMING_TDS="40" --component-param=MEM_TRAS_NS="37.5" --component-param=REF_CLK_FREQ="125.0" --component-param=MEM_BT="Sequential" --component-param=FORCE_SHADOW_REGS="AUTO" --component-param=TIMING_TDH="110" --component-param=MEM_DQ_PER_DQS="8" --component-param=MEM_ROW_ADDR_WIDTH="16" --component-param=MEM_TREFI_US="7.8" --component-param=PINGPONGPHY_EN="false" --component-param=MEM_TCL="11" --component-param=TIMING_TDQSCK="225" --component-param=DLL_SHARING_MODE="None" --component-param=CTL_USR_REFRESH_EN="false" --component-param=TIMING_BOARD_MAX_DQS_DELAY="0.6" --component-param=TIMING_BOARD_SKEW_BETWEEN_DQS="0.02" --component-param=MEM_TWR_NS="15.0" --component-param=MEM_FORMAT="DISCRETE" --component-param=CTL_LOOK_AHEAD_DEPTH="4" --component-param=SOPC_COMPAT_RESET="false" --component-param=MEM_VENDOR="Hynix" --component-param=AVL_MAX_SIZE="64" --component-param=MEM_TMRD_CK="4" --component-param=MEM_TRRD_NS="6.25" --component-param=CTL_CSR_CONNECTION="EXPORT" --component-param=DEVICE_DEPTH="1" --component-param=MEM_VOLTAGE="1.35V DDR3L" --component-param=AUTO_PD_CYCLES="0" --component-param=CTL_CSR_ENABLED="false" --component-param=AC_PACKAGE_DESKEW="false" --component-param=MEM_IF_DM_PINS_EN="true" --component-param=USER_DEBUG_LEVEL="0" --component-param=PACKAGE_DESKEW="false" --component-param=PHY_ONLY="false" --component-param=MEM_COL_ADDR_WIDTH="10" --component-param=MEM_CK_PHASE="0.0" --component-param=TIMING_BOARD_AC_TO_CK_SKEW="0.0" --component-param=ADDR_ORDER="0" --component-param=MEM_CK_WIDTH="1" --component-param=MEM_ATCL="Disabled" --component-param=TIMING_TDQSS="0.25" --component-param=TIMING_TDQSQ="150" --component-param=BYTE_ENABLE="true" --component-param=MEM_VERBOSE="true" --component-param=MEM_ASR="Manual" --component-param=MEM_CLK_FREQ_MAX="1066.667" --component-param=SKIP_MEM_INIT="true" --component-param=MEM_WTCL="8" --component-param=RATE="Quarter" --component-param=MEM_TFAW_NS="30.0" --component-param=POWER_OF_TWO_BUS="true" --component-param=TIMING_TDSS="0.2" --component-param=TIMING_TIH="210" --component-param=PLL_LOCATION="Top_Bottom" --component-param=MEM_TRTP_NS="7.5" --component-param=PLL_SHARING_MODE="None" --component-param=MEM_RTT_WR="RZQ/2" --component-param=TIMING_TQH="0.38" --component-param=ENABLE_EXPORT_SEQ_DEBUG_BRIDGE="false" --component-param=MEM_DRV_STR="RZQ/6" --component-param=MEM_PD="DLL off" --component-param=TIMING_BOARD_AC_SKEW="0.02" --component-param=TIMING_TDSH="0.2" --component-param=CTL_AUTOPCH_EN="false" --component-param=EXPORT_AFI_HALF_CLK="false" --component-param=MEM_TRP_NS="13.75" --component-param=TIMING_BOARD_ISI_METHOD="AUTO" --component-param=ADD_EFFICIENCY_MONITOR="false" --component-param=MEM_CLK_FREQ="800.0" --component-param=MEM_MIRROR_ADDRESSING="0" --component-param=CTL_ECC_AUTO_CORRECTION_ENABLED="true" --component-param=MEM_TINIT_US="500" --component-param=MEM_DQ_WIDTH="72" 
```